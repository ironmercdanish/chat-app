<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Chats</title>
    <link rel="stylesheet" href="/style.css"> <!-- Link to CSS -->
</head>
<body>
    <header>
        <h3>All Chats</h3>
        <form method="get" action="/chats/new">
            <button type="submit">New Chat</button>
        </form>
    </header>
    <main>
        <% if (chats.length === 0) { %>
            <p>No chats available. Start a new chat!</p>
        <% } else { %>
            <% for (let chat of chats) { %>
                <div class="chat">
                    <p><strong>From:</strong> <%= chat.from %></p>
                    <div class="msg">
                        <p><strong>Message:</strong> <%= chat.msg %></p>
                        <div class="chat-actions"> <!-- Container for buttons -->
                            <form method="get" action="/chats/<%= chat._id %>/edit" style="display:inline;">
                                <button type="submit">Edit</button>
                            </form>
                            <form method="post" action="/chats/<%= chat._id %>?_method=DELETE" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this chat?');">
                                <button type="submit">Delete</button>
                            </form>
                        </div>
                    </div>
                    <p><strong>Received by:</strong> <%= chat.to %></p>
                    <hr>
                </div>
            <% } %>
        <% } %>
    </main>
    
</body>
</html>
